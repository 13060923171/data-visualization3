# 说明文档

## 爬大众点评的过程

爬大众主要是是通过API去获取的，首先通过大众点评的网站去获取对应的请求参数，这个是要去到大众点评的店铺页面，通过搜索关键词来获取要获取的店铺ID，然后去获取整个店铺的信息，如：店铺ID、当前页码、星级、人均、评论、图片、评论时间、用户id、点赞数、评论数，在获取的过程中，我们写一个start_search函数来判断当前页面是否已经被采取，判断店铺是否为重复之后，然后再去评论列表相对应的字段，判断是否为文本数据，如果为文本数据就可以获取，不是文本数据就过滤掉。最后把这些获取下来的字段用pandas的to_excel函数去保存为Excel文件

## 爬携程的步骤

爬携程的过程也是通过API去获取的，首先还是去到携程的首页，去获取里面的headers值，获取里面的cookie，接着去获取每个地点对应的id和名称，例如大昭寺对应的ID为75938，布达拉宫对应的ID为75936，然后开始调用API，设置请求超时时间，避免在爬取的过程中，程序中断，接着我们再传入data的json格式去用post请求来获取每条评论的JSON内容，对json进行定位处理，然后根据里面的sight_name,sightid,commentid,userNick,userMember,replyInfo,commentKeywordList,commentTagInfo,publishStatus,usefulCount,replyCount,score,images,scores,content,recommendItems,publishTypeTag,ipLocateName来获取每个字段的对应的文本内容，再去判断总的评论量有多少，去获取全部的评论，直到该请求完结，就停止请求用break去返回，最后把这些获取下来的字段用pandas的to_excel函数去保存为Excel文件



## 数据处理

这里说说数据处理吧，在获取了上面的那么多数据之后，我们首先要做的事情就是数据处理，只要把数据都处理好的，我们才能进行分析的步骤，数据处理一共用到了pandas，re,jieba,snownlp

首先我们通过re.sub函数进行数据处理和机械压缩，来实现把多余的词以及无效标点符号给去掉，还有表情包这些影响我们做后面情感划分的数据，接着根据处理好的文本，我们采用jieba里面的pseg.cut去做分词，在分词的时候我们会去判断字的长度以及是否为中文数据、是否不存在停用词文本里面，如果这些条件都成立，那么我们就把分好的词保存下来，在处理好上面的步骤之后，我们去对去重，把重复的内容给删除，再把分词过后，内容为空集的内容进行删行处理，最后再用snownlp里面的sentiments的函数对文本进行打分，其中分值大于0.5判断为积极态度，分值小于0.5判断为消极态度，其余的判断为中立态度，最后携程布达拉宫处理的数据为3136条，大昭寺的数据为2994；大众布达拉宫处理的数据为9965，大昭寺的数据为4848



## 数据分析

在上面数据处理好之后，我们拿到了干净的数据，我们就可以专心进行我们的分析过程了，本次分析采用的matplotlib，seaborn，stylecloud

首先我们根据前面处理好的情感分析，先获取对应景点的情感数据，然后采用pandas中的value_counts函数去进行统计，积极，消极，中立的相对应的条数，然后利用matpltlib中的Pie函数去进行做饼图可视化，并且调用了matpltlib中的rcParams进行中文显示，同时对于pie中的autopc去两位小数,并且采用legend来显示图例，最后得知，大众点评中布达拉宫，积极为77.46%，消极为22.53%，中立为0.01%，而携程中，积极态度为78.22%，消极位21.30%，中立为0.48%，我们再去看看大昭寺的表现，大昭寺在大众点评中，积极位81.50%，消极为18.50%，在携程中，积极为83.23%，消极位16.60%，中立为0.17%。

其次，我们根据处理好的数据去查看每年的发帖频率，得知每个地区的热度变化，我们根据pandas中的to_datetime函数对发帖的时间做一个处理，把时间的数据类型转变为datetime，然后我们根据pandas中的resample中的"A-DEC"去统计每一年发帖的总结，接着我们采用matplotlib中的bar去对数据进行可视化处理，来查看他们的一个趋势变化情况，从图可知，布达拉宫大众点评的发帖趋势是逐年上涨的，并且在2018年达到历史最高峰，之后开始下滑，又于2022年出现了第二次高峰，而在携程上布达拉宫则是在2023年达到历史最高峰。

对比于大昭寺，它的表现，在大众点评上从2008年开始出现评论，于2019年出现最高峰，之后又于2023年出现次高峰，而相比于携程，发帖趋势也较为平缓，每年保持在300以上。

最后，我们想去了解不同景点，在不同平台的用户画像的话，我们就要用词云图进行可视化出来，我们根据stylecloud去选取前100的高频词，去进行词云展示，从而得知对于不同平台，不同地区，每个旅客所关心的点都不同。







根据标题：旅游形象感知研究
根据以下提供的内容，进行报告汇总，要求字数在5500字左右，
提供的内容：
爬大众主要是是通过API去获取的，首先通过大众点评的网站去获取对应的请求参数，这个是要去到大众点评的店铺页面，通过搜索关键词来获取要获取的店铺ID，然后去获取整个店铺的信息，如：店铺ID、当前页码、星级、人均、评论、图片、评论时间、用户id、点赞数、评论数，在获取的过程中，我们写一个start_search函数来判断当前页面是否已经被采取，判断店铺是否为重复之后，然后再去评论列表相对应的字段，判断是否为文本数据，如果为文本数据就可以获取，不是文本数据就过滤掉。最后把这些获取下来的字段用pandas的to_excel函数去保存为Excel文件。

爬携程的过程也是通过API去获取的，首先还是去到携程的首页，去获取里面的headers值，获取里面的cookie，接着去获取每个地点对应的id和名称，例如大昭寺对应的ID为75938，布达拉宫对应的ID为75936，然后开始调用API，设置请求超时时间，避免在爬取的过程中，程序中断，接着我们再传入data的json格式去用post请求来获取每条评论的JSON内容，对json进行定位处理，然后根据里面的sight_name,sightid,commentid,userNick,userMember,replyInfo,commentKeywordList,commentTagInfo,publishStatus,usefulCount,replyCount,score,images,scores,content,recommendItems,publishTypeTag,ipLocateName来获取每个字段的对应的文本内容，再去判断总的评论量有多少，去获取全部的评论，直到该请求完结，就停止请求用break去返回，最后把这些获取下来的字段用pandas的to_excel函数去保存为Excel文件。

这里说说数据处理吧，在获取了上面的那么多数据之后，我们首先要做的事情就是数据处理，只要把数据都处理好的，我们才能进行分析的步骤，数据处理一共用到了pandas，re,jieba,snownlp
首先我们通过re.sub函数进行数据处理和机械压缩，来实现把多余的词以及无效标点符号给去掉，还有表情包这些影响我们做后面情感划分的数据，接着根据处理好的文本，我们采用jieba里面的pseg.cut去做分词，在分词的时候我们会去判断字的长度以及是否为中文数据、是否不存在停用词文本里面，如果这些条件都成立，那么我们就把分好的词保存下来，在处理好上面的步骤之后，我们去对去重，把重复的内容给删除，再把分词过后，内容为空集的内容进行删行处理，最后再用snownlp里面的sentiments的函数对文本进行打分，其中分值大于0.5判断为积极态度，分值小于0.5判断为消极态度，其余的判断为中立态度，最后携程布达拉宫处理的数据为3136条，大昭寺的数据为2994；大众布达拉宫处理的数据为9965，大昭寺的数据为4848

在上面数据处理好之后，我们拿到了干净的数据，我们就可以专心进行我们的分析过程了，本次分析采用的matplotlib，seaborn，stylecloud
首先我们根据前面处理好的情感分析，先获取对应景点的情感数据，然后采用pandas中的value_counts函数去进行统计，积极，消极，中立的相对应的条数，然后利用matpltlib中的Pie函数去进行做饼图可视化，并且调用了matpltlib中的rcParams进行中文显示，同时对于pie中的autopc去两位小数,并且采用legend来显示图例，最后得知，大众点评中布达拉宫，积极为77.46%，消极为22.53%，中立为0.01%，而携程中，积极态度为78.22%，消极位21.30%，中立为0.48%，我们再去看看大昭寺的表现，大昭寺在大众点评中，积极位81.50%，消极为18.50%，在携程中，积极为83.23%，消极位16.60%，中立为0.17%。

其次，我们根据处理好的数据去查看每年的发帖频率，得知每个地区的热度变化，我们根据pandas中的to_datetime函数对发帖的时间做一个处理，把时间的数据类型转变为datetime，然后我们根据pandas中的resample中的"A-DEC"去统计每一年发帖的总结，接着我们采用matplotlib中的bar去对数据进行可视化处理，来查看他们的一个趋势变化情况，从图可知，布达拉宫大众点评的发帖趋势是逐年上涨的，并且在2018年达到历史最高峰，之后开始下滑，又于2022年出现了第二次高峰，而在携程上布达拉宫则是在2023年达到历史最高峰。

对比于大昭寺，它的表现，在大众点评上从2008年开始出现评论，于2019年出现最高峰，之后又于2023年出现次高峰，而相比于携程，发帖趋势也较为平缓，每年保持在300以上。

最后，我们想去了解不同景点，在不同平台的用户画像的话，我们就要用词云图进行可视化出来，我们根据stylecloud去选取前100的高频词，去进行词云展示，从而得知对于不同平台，不同地区，每个旅客所关心的点都不同。









